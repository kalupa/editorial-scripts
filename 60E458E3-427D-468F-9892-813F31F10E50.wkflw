{"actions":[{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionCountWords","parameters":{"countOption":0}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionRunScript","parameters":{"script":"#coding: utf-8\nimport workflow\nimport console\nimport requests\n\nusername = \"kalupa\"\ngoalname = \"write\"\nauth_token = \"jexCC9yRp4icqKzpVxX2\"\n\n# requests Oauth1 support\n# beeminder example \n#   https:\/\/www.beeminder.com\/apps\/authorize?client_id=xyz456&redirect_uri=http:\/\/foo.com\/auth_callback&response_type=token\n# https:\/\/requests-oauthlib.readthedocs.org\/en\/latest\/\n\n# get entry word count from before adding personal stats\nwordcount = int(workflow.get_input())\n\n# build POST url\nbm_url_format = 'https:\/\/www.beeminder.com\/api\/v1\/users\/{username}\/goals\/{goalname}\/datapoints.json'\nbm_url = bm_url_format.format(username=username, goalname=goalname)\n\n# build request object json\nbm_obj = { \n\t\"auth_token\": auth_token,\n\t\"value\": wordcount, # word count\n  \"comment\": \"Auto-entry from Editorial\",\n}\n\n# POST beeminder\nresp = requests.post(bm_url, params=bm_obj)\n\n# check result\ndatapoint = resp.json()\n\n# show HUD of result\nif 'status' in datapoint:\n\tconsole.hud_alert('Updated Beeminder: ' + str(datapoint['value']) + ' words', 'success', 2.0)\nelse:\n\tif 'errors' in datapoint: \n\t\terr_msg = datapoint['errors']['message']\n\telse:\n\t\terr_msg = 'Unknown error updating Beeminder'\n\n\tconsole.hud_alert(err_msg, 'error', 2.0)\n\tprint dict(datapoint)\n\t\n# send back the count\nworkflow.set_output(workflow.get_input())\n"}}]}