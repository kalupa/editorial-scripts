{"actions":[{"pauseBeforeRunning":false,"subActions":[{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionShowHUD","parameters":{"HUDText":{"type":"advancedText","tokenRanges":{},"text":"Clipboard Empty, Stopping"},"duration":1,"icon":1}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStopWorkflow","parameters":{"showHUD":false,"HUDTitle":""}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionConditionEnd","parameters":{}}],"pauseWithoutShowingParameters":false,"customTitle":"Check for empty clipboard","class":"WorkflowActionCondition","parameters":{"expression1":{"type":"advancedText","tokenRanges":{"{0, 1}":"Clipboard"},"text":"?"},"expression2":{"type":"advancedText","tokenRanges":{},"text":""},"comparisonType":0}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"Get Entry Text from Clipboard","class":"WorkflowActionStoreVariable","parameters":{"name":"entry_text","value":{"type":"advancedText","tokenRanges":{"{0, 1}":"Clipboard"},"text":"?"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"entry_name","value":{"type":"advancedText","tokenRanges":{},"text":""}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"Create journal file","class":"WorkflowActionRunScript","parameters":{"script":"#coding: utf-8\nimport workflow\nimport editor\nimport clipboard\nimport datetime\n\nentry_filename = workflow.get_variable('entry_filename')\nif (entry_filename):\n  filename = entry_filename\n  entry_name = filename.split('.')[0]\nelse:\n  entry_name = 'Journal 0{:%Y-%m-%d}'.format(datetime.date.today())\n  filename = entry_name + '.markdown'\n\t\nraw_entry = workflow.get_variable('entry_text')\nif (raw_entry):\n\tcontent = raw_entry\nelse:\n\tcontent = ''\n\ncontent = '# ' + entry_name + '\\n\\n' + content\ncontent = content.strip() + '\\n'\n\neditor.set_file_contents(filename, content)\n\nworkflow.set_variable('entry_text', content)\nworkflow.set_variable('entry_name', entry_name)\n\nworkflow.set_output(content)\n"}}]}