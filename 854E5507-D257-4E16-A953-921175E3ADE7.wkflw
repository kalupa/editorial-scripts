{"actions":[{"pauseBeforeRunning":false,"subActions":[{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionShowHUD","parameters":{"HUDText":{"type":"advancedText","tokenRanges":{},"text":"Clipboard Empty, Stopping"},"duration":1,"icon":1}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStopWorkflow","parameters":{"showHUD":false,"HUDTitle":""}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionConditionEnd","parameters":{}}],"pauseWithoutShowingParameters":false,"customTitle":"Check for empty clipboard","class":"WorkflowActionCondition","parameters":{"expression1":{"type":"advancedText","tokenRanges":{"{0, 1}":"Clipboard"},"text":"?"},"expression2":{"type":"advancedText","tokenRanges":{},"text":""},"comparisonType":0}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"entry_text","value":{"type":"advancedText","tokenRanges":{"{0, 1}":"Clipboard"},"text":"?"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"wordcount","value":{"type":"advancedText","tokenRanges":{"{0, 1}":"Input"},"text":"?"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"entry_filename","value":{"type":"advancedText","tokenRanges":{"{11, 1}":"%date:MM","{13, 1}":"%date:dd","{9, 1}":"%date:yyyy"},"text":"Journal 0?-?-?.markdown"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"Create journal file","class":"WorkflowActionRunScript","parameters":{"script":"#coding: utf-8\nimport workflow\nimport editor\nimport clipboard\nimport datetime\n\nraw_entry = workflow.get_variable('entry_text')\n\nentry_name = 'Journal 0{:%Y-%m-%d}'.format(datetime.date.today())\ncontent = '# ' + entry_name + '\\n\\n' + raw_entry\ncontent = content.strip() + '\\n'\nfilename = entry_name + '.markdown'\n# daily_stats = workflow.get_variable('journal_stats')\n\neditor.set_file_contents(filename, content)\n#editor.set_file_contents(filename, content + '\\n\\n' + daily_stats)\n\nworkflow.set_variable('entry_text', content)\nworkflow.set_variable('entry_filename', filename)\n\nclipboard.set(content)\nworkflow.set_output(content)\n"}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"Get Personal Stats","class":"WorkflowActionRunSubWorkflow","parameters":{"stopOnError":true,"workflow":{"name":"Personal Stats"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"journal_stats","value":{"type":"advancedText","tokenRanges":{"{0, 1}":"Input"},"text":"?"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"Add stats to journal","class":"WorkflowActionRunScript","parameters":{"script":"#coding: utf-8\nimport workflow\nimport editor\nimport clipboard\nimport datetime\n\n# entry_name = 'Journal 0{:%Y-%m-%d}'.format(datetime.date.today())\n# filename = entry_name + '.markdown'\n\nentry_file = workflow.get_variable('entry_filename')\ndaily_stats = workflow.get_variable('journal_stats')\n\nfile_contents = editor.get_file_contents(entry_file)\n\neditor.set_file_contents(filename, file_contents + '\\n\\n' + daily_stats)\n\nworkflow.set_variable('entry_text', content)\nworkflow.set_variable('entry_filename', filename)\n\nclipboard.set(content)\nworkflow.set_output(content)\n"}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionSetClipboard","parameters":{}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"Entry","value":{"type":"advancedText","tokenRanges":{"{0, 1}":"entry_filename"},"text":"?"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionShowHUD","parameters":{"HUDText":{"type":"advancedText","tokenRanges":{"{0, 1}":"entry_filename"},"text":"?"},"duration":1,"icon":0}}]}