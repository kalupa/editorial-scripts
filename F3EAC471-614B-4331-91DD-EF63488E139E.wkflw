{"actions":[{"class":"WorkflowActionCondition","pauseBeforeRunning":false,"subActions":[{"class":"WorkflowActionStopWorkflow","pauseBeforeRunning":false,"customTitle":"","parameters":{"stopOption":0,"HUDTitle":"No Document Selected","showHUD":true},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionConditionEnd","pauseBeforeRunning":false,"customTitle":"","parameters":{},"pauseWithoutShowingParameters":false}],"customTitle":"Stop if no document...","parameters":{"expression1":{"tokenRanges":{"{0, 1}":"%editor:filename"},"type":"advancedText","text":"?"},"expression2":{"tokenRanges":{},"type":"advancedText","text":""},"comparisonType":0},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionCondition","pauseBeforeRunning":false,"subActions":[{"class":"WorkflowActionStopWorkflow","pauseBeforeRunning":false,"customTitle":"","parameters":{"HUDTitle":"Clipboard Empty","showHUD":true},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionConditionEnd","pauseBeforeRunning":false,"customTitle":"","parameters":{},"pauseWithoutShowingParameters":false}],"customTitle":"Stop if no clipboard...","parameters":{"expression1":{"tokenRanges":{"{0, 1}":"Clipboard"},"type":"advancedText","text":"?"},"expression2":{"tokenRanges":{},"type":"advancedText","text":""},"comparisonType":0},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionStoreVariable","pauseBeforeRunning":false,"customTitle":"","parameters":{"name":"CSS Light","value":{"tokenRanges":{},"type":"advancedText","text":"body {\n\tbackground-color: #f6f6f6;\n\tcolor: #333;\n\tfont-family: \"Source Sans Pro\";\n\tmargin:40px;\n}\ndel {\n\tcolor: #820e03;\n\tbackground-color: #ffb5af;\n\t-webkit-border-radius: 3px;\n}\nins {\n\ttext-decoration: none;\n\tcolor: #50792c;\n\tbackground-color: #e0edd5;\n\t-webkit-border-radius: 3px;\n}\npre {\n\twhite-space: pre-wrap;\n\tfont-family: \"DejaVuSansMono\";\n\tfont-size: 17px;\n}\n@media only screen and (max-device-width: 568px) {\n\tbody {\n\t\tmargin: 10px;\n\t}\n\th1 {\n\t\tfont-size: 18px;\n\t}\n\tpre {\n\t\tfont-size: 15px;\n\t}\n\t* {\n\t\t-webkit-text-size-adjust: none;\n\t}\n}"}},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionStoreVariable","pauseBeforeRunning":false,"customTitle":"","parameters":{"name":"CSS Dark","value":{"tokenRanges":{},"type":"advancedText","text":"body {\n\tbackground-color: #262b30;\n\tcolor: #ebebeb;\n\tfont-family: \"Source Sans Pro\";\n\tmargin:40px;\n}\ndel {\n\tcolor: #ffdad8;\n\tbackground-color: #5c0700;\n\t-webkit-border-radius: 3px;\n}\nins {\n\ttext-decoration: none;\n\tcolor: #cce8b5;\n\tbackground-color: #263e0f;\n\t-webkit-border-radius: 3px;\n}\npre {\n\twhite-space: pre-wrap;\n\tfont-family: \"DejaVuSansMono\";\n\tfont-size: 17px;\n}\n@media only screen and (max-device-width: 568px) {\n\tbody {\n\t\tmargin: 10px;\n\t}\n\th1 {\n\t\tfont-size: 18px;\n\t}\n\tpre {\n\t\tfont-size: 15px;\n\t}\n\t* {\n\t\t-webkit-text-size-adjust: none;\n\t}\n}"}},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionStoreVariable","pauseBeforeRunning":false,"customTitle":"","parameters":{"name":"CSS","value":{"tokenRanges":{},"type":"advancedText","text":"This is set from the script, depending on the currently selected theme."}},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionRunScript","pauseBeforeRunning":false,"customTitle":"","parameters":{"startNewInterpreter":false,"script":"#coding: utf-8\nimport workflow\nimport editor\nimport clipboard\nimport difflib\nfrom StringIO import StringIO\nimport cgi\n\ndef html_diff(a, b):\n\tseq = difflib.SequenceMatcher(None, a, b)\n\topcodes = seq.get_opcodes()\n\tout = StringIO()\n\tfor op, a0, a1, b0, b1 in opcodes:\n\t\tif op == 'equal':\n\t\t\tout.write(a[a0:a1])\n\t\tif op == 'insert' or op == 'replace':\n\t\t\tout.write('<ins>' + b[b0:b1] + '<\/ins>')\n\t\tif op == 'delete' or op == 'replace':\n\t\t\tout.write('<del>' + a[a0:a1] + '<\/del>')\n\treturn out.getvalue()\n\ndef main():\n\ttheme = editor.get_theme()\n\tworkflow.set_variable('CSS', workflow.get_variable('CSS Dark' if theme == 'Dark' else 'CSS Light'))\n\ta = cgi.escape(clipboard.get())\n\tb = cgi.escape(editor.get_text())\n\thtml = html_diff(a, b)\n\tworkflow.set_output(html)\n\nif __name__ == '__main__':\n\tmain()\n"},"pauseWithoutShowingParameters":false},{"class":"WorkflowActionShowHTMLPreview","pauseBeforeRunning":false,"customTitle":"","parameters":{"title":"Diff","baseURL":"","html":{"tokenRanges":{"{113, 1}":"Input","{59, 1}":"CSS","{99, 1}":"%editor:filename","{101, 1}":"%editor:file-extension"},"type":"advancedText","text":"<!DOCTYPE html><html>\n<head><meta charset=\"utf-8\"\/>\n<style>?<\/style><\/head>\n<body>\n<h1>Clipboard âž¡ ?.?<\/h1>\n<pre>?<\/pre>\n<\/body><\/html>"}},"pauseWithoutShowingParameters":false}]}